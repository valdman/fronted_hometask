{"version":3,"sources":["webpack:///webpack/bootstrap 7b3521e2b4274827f31c","webpack:///./src/utils.js","webpack:///./src/getContents.js","webpack:///./src/listeners.js","webpack:///./src/transactions.js","webpack:///./src/index.js"],"names":["fetchServer","path","params","fetch","showHint","str","popup","document","getElementById","style","display","innerHTML","console","log","setTimeout","myJSONstringify","obj","key","HTMLtoArray","arr","i","length","push","getInputValue","value","getContainer","fetchItems","myHeaders","Headers","myInit","method","headers","catch","then","res","json","addCards","cards","container","map","card","getCardHtml","id","pic","name","price","desc","attachListeners","logUser","getUsers","deleteUsers","buyItem","onclick","getElementsByClassName","bind","credentials","body","itemId","ok","err","login","status","cookie","token"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7b3521e2b4274827f31c","export const fetchServer = (path, params) => {\n    return fetch(\"http://localhost:3001\" + path, params);\n}\n\nexport const showHint = (str) => {\n    var popup = document.getElementById(\"popup\");\n    popup.style.display = \"block\";\n    popup.innerHTML = str;\n    console.log(str);\n    setTimeout(() => {\n        popup.style.display = \"none\";\n    }, 3000);\n};\n\nexport const myJSONstringify = (obj) => {\n    let str = \"{\";\n    for(var key in obj) {\n        str += `\"${key}\":\"${obj[key]}\"`;\n    }\n    str += \"}\"\n    return str;\n};\n\nexport const HTMLtoArray = (obj) => {\n    let arr = [];\n    for(let i = 0; i < obj.length; i++){\n        arr.push(obj[i]);\n    }\n    return arr;\n}\n\nexport const getInputValue = () => document.getElementById(\"loginInput\").value;\nexport const getContainer = () => document.getElementById(\"itemContainer\");\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import {fetchServer} from \"./utils\";\n\nexport const fetchItems = () => {\n    const myHeaders = new Headers({\n        //'Content-Type': 'application/json',\n        'Accept': 'application/json',\n    });\n\n    const myInit = {\n        method: 'GET',\n        headers: myHeaders,\n        //credentials: \"omit\",\n    };\n\n    return fetchServer(\"/items\", myInit)\n        .catch(() => console.log(\"fetch error\"))\n        .then(res => res.json())\n        .catch(() => console.log(\"cannot Json()\"));\n};\n\nexport const addCards = (cards, container) => {\n    cards.map((card) => {\n        container.innerHTML += getCardHtml(card);\n    });\n}\n\nconst getCardHtml = (obj) => {\n    return `\n    <div class=\"card\" name=\"${obj.id}\" style=\"background-image: url(${obj.pic}\">\n        <div class=\"cardBlock\">\n            <div class=\"itemName\"><b>${obj.name}</b> <ins>${obj.price}$</ins></div>\n            <div class=\"itemDesc\">${obj.desc}</div>\n        </div>\n    </div>\n    `\n};\n\n\n// WEBPACK FOOTER //\n// ./src/getContents.js","import { HTMLtoArray } from \"./utils\";\n\n\nexport const attachListeners = ({ logUser, getUsers, deleteUsers, buyItem }) => {\n    document.getElementById(\"loginButton\").onclick = logUser;\n    document.getElementById(\"getUsers\").onclick = getUsers;\n    document.getElementById(\"deleteUsers\").onclick = deleteUsers;\n    HTMLtoArray(document.getElementsByClassName(\"card\")).map(card => card.onclick = buyItem.bind(null, card.name)); \n}\n\n\n// WEBPACK FOOTER //\n// ./src/listeners.js","import {fetchServer, showHint, myJSONstringify} from \"./utils\";\n\nexport const buyItem = (id) => {\n    const myHeaders = new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'text/plain',\n    });\n\n    const myInit = {\n        method: 'POST',\n        headers: myHeaders,\n        credentials: \"include\",\n        body: myJSONstringify({\n            itemId: id\n        }),\n    };\n\n    fetchServer(\"/buy\", myInit)\n        .catch(() => console.log(\"gotcha\"))\n        .then(res => res)\n        .then(res => {\n            showHint(res.ok ? \"Покуплено\" : \"Логин?\");\n        })\n        .catch((err) => console.log(\"err\"));\n};\n\n\n// WEBPACK FOOTER //\n// ./src/transactions.js","import { fetchItems, addCards } from \"./getContents\";\nimport { buyItem } from \"./transactions\";\nimport { showHint, fetchServer, myJSONstringify, getInputValue, getContainer} from \"./utils\";\nimport { attachListeners } from \"./listeners\";\n\nconst logUser = () => {\n\n    const myHeaders = new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n    });\n\n    const myInit = {\n        method: 'POST',\n        headers: myHeaders,\n        body: myJSONstringify({ login: getInputValue()}),\n    };\n\n    fetchServer(\"/login\", myInit)\n        .then(res => res.json())\n        .then(res => {\n            showHint(res.status)\n            document.cookie = `token=${res.token};expires=${60 * 10}`;\n        })\n        .catch((err) => console.log(err));\n};\n\nconst getUsers = () => {\n    const myHeaders = new Headers({\n        'Accept': 'application/json',\n    });\n\n    const myInit = {\n        method: 'GET',\n        headers: myHeaders,\n        credentials: \"omit\",\n    };\n\n    fetchServer(\"/users\", myInit)\n        .then(res => res.json())\n        .then(res => {\n            showHint(\"Список в консоли\");\n            console.log(res);\n        });\n};\n\nconst deleteUsers = () => {\n    const myHeaders = new Headers({\n        'Accept': 'text/plain',\n    });\n\n    const myInit = {\n        method: 'DELETE',\n        headers: myHeaders,\n    };\n\n    fetchServer(\"/users\", myInit)\n        .then(res => {\n            console.log(res);\n            showHint(\"Удален\");\n        })\n        .catch((err) => {\n            console.log(err);\n            showHint(\"Ошибка\");\n        });\n};\n\nfetchItems()\n    .then(cards => {\n        addCards(cards, getContainer());\n        attachListeners({logUser, getUsers, deleteUsers, buyItem});\n    });\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}